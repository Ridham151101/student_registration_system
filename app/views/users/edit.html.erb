<%# Admin User Edit Form %>

<div class="container mt-5">
  <div class="card">
    <div class="card-header text-center bg-primary text-white">
      <h2>Edit User Details</h2>
    </div>
    <div class="card-body">
      <%= form_with(model: @user, url: user_path(@user), method: :patch, local: true) do |f| %>
        <div class="row mb-4">
          <div class="col-md-6">
            <%= f.label :name, class: 'form-label' %>
            <%= f.text_field :name, class: 'form-control form-control-lg', placeholder: 'Enter full name' %>
          </div>
          <div class="col-md-6">
            <%= f.label :email, class: 'form-label' %>
            <%= f.email_field :email, class: 'form-control form-control-lg', placeholder: 'Enter email address' %>
          </div>
        </div>

        <div class="row mb-4">
          <div class="col-md-6">
            <%= f.label :dob, 'Date of Birth', class: 'form-label' %>
            <%= f.date_field :dob, class: 'form-control form-control-lg', placeholder: 'Select date of birth' %>
          </div>
          <div class="col-md-6">
            <%= f.label :address, class: 'form-label' %>
            <%= f.text_field :address, class: 'form-control form-control-lg', placeholder: 'Enter address' %>
          </div>
        </div>

        <div class="row mb-4">
          <div class="col-md-12">
            <%= f.label :photo, 'Profile Photo', class: 'form-label' %>
            <%= f.file_field :photo, class: 'form-control' %>
            <% if @user.photo.attached? %>
              <div class="mt-2">
                <strong>Current Photo:</strong>
                <%= image_tag @user.photo.variant(resize: "100x100"), class: 'img-thumbnail mt-2' %>
              </div>
            <% end %>
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-md-12 text-center">
            <%= f.submit 'Update User', class: 'btn btn-success btn-lg me-2' %>
            <% if current_user.role == 'admin' %>
              <%= link_to 'Cancel', users_path, class: 'btn btn-secondary btn-lg' %>
            <% else %>
              <%= link_to 'Cancel', user_path(current_user), class: 'btn btn-secondary btn-lg' %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
